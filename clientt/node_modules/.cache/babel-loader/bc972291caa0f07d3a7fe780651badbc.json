{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"F:/projects/reactprojects/memories/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Typography,AppBar,Toolbar,Avatar,Button}from'@material-ui/core';import useStyles from'./styles.js';import memories from'./memories.png';import{Link,useHistory,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';var Navbar=function Navbar(){var classes=useStyles();var dispatch=useDispatch();var history=useHistory();var location=useLocation();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];//  console.log(user)\nvar logout=function logout(){dispatch({type:\"LOGOUT\"});history.push('/');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);//  console.log(decodedToken)\nif(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.brandContainer,children:[/*#__PURE__*/_jsx(Typography,{component:Link,to:\"/\",className:classes.heading,variant:\"h2\",align:\"center\",children:\" Memories\"}),/*#__PURE__*/_jsx(\"img\",{src:memories,className:classes.img,alt:\"memories\",height:\"60\"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl,children:user===null||user===void 0?void 0:user.result.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user===null||user===void 0?void 0:user.result.name}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",className:classes.logout,onClick:logout,children:\"logout\"})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})]});};export default Navbar;","map":{"version":3,"sources":["F:/projects/reactprojects/memories/client/src/navbar/Navbar.js"],"names":["React","useState","useEffect","Typography","AppBar","Toolbar","Avatar","Button","useStyles","memories","Link","useHistory","useLocation","useDispatch","decode","Navbar","classes","dispatch","history","location","JSON","parse","localStorage","getItem","user","setUser","logout","type","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","heading","img","toolbar","result","profile","purple","name","imageUrl","charAt","userName"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport {Typography,AppBar, Toolbar, Avatar, Button} from '@material-ui/core'\r\nimport useStyles from './styles.js'\r\nimport memories from './memories.png'\r\nimport {Link,useHistory,useLocation } from 'react-router-dom'\r\nimport {useDispatch} from 'react-redux'\r\nimport decode from 'jwt-decode'\r\n\r\n\r\nconst Navbar = () => {\r\n  const classes=useStyles()\r\n  const dispatch=useDispatch()\r\n  const history=useHistory()\r\n  const location=useLocation()\r\n  const [user,setUser]=useState(JSON.parse(localStorage.getItem('profile')))\r\n//  console.log(user)\r\n  \r\n  const logout = () => {\r\n    dispatch({ type:\"LOGOUT\", });\r\n\r\n    history.push('/');\r\n\r\n    setUser(null);\r\n  };\r\n    \r\n  useEffect(()=>{\r\n     const token=user?.token\r\n     if(token){\r\n       const decodedToken=decode(token)\r\n      //  console.log(decodedToken)\r\n       if(decodedToken.exp *1000<new Date().getTime()) logout()\r\n     }\r\n     setUser(JSON.parse(localStorage.getItem('profile')))\r\n  },[location])\r\n  return (\r\n     <AppBar className={classes.appBar} position=\"static\" color='inherit'>\r\n       <div className={classes.brandContainer}>\r\n         <Typography component={Link} to='/'  className={classes.heading}  variant='h2' align='center'> Memories</Typography>\r\n         <img src={memories} className={classes.img} alt=\"memories\" height=\"60\"/>\r\n        </div>\r\n      <Toolbar className={classes.toolbar}>\r\n        {user?.result?(\r\n          <div className={classes.profile}>\r\n            <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\r\n            <Typography className={classes.userName} variant='h6'>{user?.result.name}</Typography>\r\n            <Button variant='contained' color='secondary' className={classes.logout} onClick={logout}>logout</Button>\r\n          </div>\r\n        ):(\r\n          <Button component={Link} to=\"/auth\" variant='contained' color=\"primary\"  >Sign In</Button>\r\n        )}\r\n      </Toolbar>\r\n      </AppBar> \r\n  )\r\n}\r\n\r\nexport default Navbar\r\n"]},"metadata":{},"sourceType":"module"}