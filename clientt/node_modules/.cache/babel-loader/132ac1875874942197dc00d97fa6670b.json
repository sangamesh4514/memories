{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"F:/projects/reactprojects/memories/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/projects/reactprojects/memories/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import useStyles from'./styles';import{TextField,Button,Paper,Typography}from'@material-ui/core';import FileBase from'react-file-base64';import{createPost,updatePost}from'../actions/posts.js';import{useDispatch,useSelector}from'react-redux';export default function Form(_ref){var _user$result3;var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var _useState=useState({title:'',message:'',tags:'',selectedFile:''}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var classes=useStyles();var dispatch=useDispatch();var post=useSelector(function(state){return currentId?state.posts.find(function(p){return p._id===currentId;}):null;});var user=JSON.parse(localStorage.getItem('profile'));var clear=function clear(){setPostData({title:'',message:'',tags:'',selectedFile:''});setCurrentId(null);};useEffect(function(){if(post)setPostData(post);},[post]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(currentId){var _user$result;dispatch(updatePost(currentId,_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name})));}else{var _user$result2;dispatch(createPost(_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name})));}clear();};// console.log(user?.result?.name)\nif(!(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name)){return/*#__PURE__*/_jsx(Paper,{className:classes.Paper,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:\"Sign in to create and like memories\"})});}return/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[currentId?\"Editing \":\"Creating \",\" a memory\"]}),/*#__PURE__*/_jsx(TextField,{name:\"title\",variant:\"outlined\",label:\"Title\",fullWidth:true,value:postData.title,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"message\",variant:\"outlined\",label:\"Message\",fullWidth:true,value:postData.message,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"tags\",variant:\"outlined\",label:\"Tags,\",fullWidth:true,value:postData.tags,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(\",\")}));}}),/*#__PURE__*/_jsx(\"div\",{className:classes.fileInput,children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref2){var base64=_ref2.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",size:\"large\",fullWidth:true,className:classes.buttonSubmit,type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true,children:\"Clear\"})]})});}","map":{"version":3,"sources":["F:/projects/reactprojects/memories/client/src/Form/Form.js"],"names":["React","useState","useEffect","useStyles","TextField","Button","Paper","Typography","FileBase","createPost","updatePost","useDispatch","useSelector","Form","currentId","setCurrentId","title","message","tags","selectedFile","postData","setPostData","classes","dispatch","post","state","posts","find","p","_id","user","JSON","parse","localStorage","getItem","clear","handleSubmit","e","preventDefault","name","result","paper","root","form","target","value","split","fileInput","base64","buttonSubmit"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport useStyles from './styles'\r\nimport {TextField,Button,Paper,Typography} from '@material-ui/core'\r\nimport FileBase from 'react-file-base64'\r\nimport {createPost,updatePost} from '../actions/posts.js'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\n\r\n\r\n\r\nexport default function Form({currentId,setCurrentId}) {\r\n  const [postData,setPostData]=useState({title:'',message:'',tags:'',selectedFile:''})\r\n  const classes=useStyles()\r\n  const dispatch=useDispatch()\r\n  const post=useSelector((state)=>currentId?state.posts.find((p)=>p._id===currentId):null)\r\n  const user=JSON.parse(localStorage.getItem('profile'))\r\n  const clear=()=>{\r\n    setPostData({title:'',message:'',tags:'',selectedFile:''})\r\n    setCurrentId(null)}\r\n  useEffect(() => {\r\n    if (post) setPostData(post)\r\n   }, [post])\r\n\r\n  const handleSubmit=(e)=>{\r\n        e.preventDefault()\r\n        if(currentId){\r\n          dispatch(updatePost(currentId,{...postData,name:user?.result?.name}))\r\n         \r\n        }\r\n        else{\r\n          dispatch(createPost({...postData,name:user?.result?.name}))\r\n        }\r\n         clear()\r\n  }\r\n  // console.log(user?.result?.name)\r\n  if(!user?.result?.name){\r\n      return(\r\n        <Paper className={classes.Paper}>\r\n          <Typography variant='h6' align='center'>\r\n            Sign in to create and like memories\r\n          </Typography>\r\n        </Paper>\r\n      )\r\n  }\r\n\r\n\r\n  return (\r\n    <Paper  className={classes.paper} >\r\n      <form autoComplete='off' noValidate className={`${classes.root} ${classes.form}`} onSubmit={handleSubmit}>\r\n      <Typography variant=\"h6\">{currentId ?`Editing `:`Creating `} a memory</Typography>\r\n      <TextField name=\"title\" variant=\"outlined\" label=\"Title\" fullWidth value={postData.title} onChange={e=>setPostData({...postData,title:e.target.value})}/>\r\n      <TextField name=\"message\" variant=\"outlined\" label=\"Message\" fullWidth value={postData.message} onChange={e=>setPostData({...postData,message:e.target.value})}/>\r\n      <TextField name=\"tags\" variant=\"outlined\" label=\"Tags,\" fullWidth value={postData.tags} onChange={e=>setPostData({...postData,tags:e.target.value.split(\",\")})}/>\r\n      <div className={classes.fileInput}>\r\n        <FileBase type='file' multiple={false} onDone={({base64})=>setPostData({...postData,selectedFile:base64})}/>\r\n      </div>\r\n      <Button variant=\"contained\" color=\"primary\" size=\"large\" fullWidth className={classes.buttonSubmit} type='submit' >Submit</Button>\r\n      <Button variant=\"contained\" color=\"secondary\" size=\"small\"  onClick={clear} fullWidth>Clear</Button>\r\n      </form>\r\n\r\n    </Paper>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}